<html metal:use-macro="here/content_lib_master/macros/master">
  <metal:block fill-slot="main"
               tal:define="wiki here/getParent;
                           parser_type wiki/parser;
                           source here/content;
                           source python:source[0]">
    <form action="editPage"
          enctype="multipart/form-data"
          method="post">
      <tal:block condition="python:parser_type != 'html'">
        <textarea style="width: 100%; height: 300px" tal:content="source" name="source">
        </textarea>
      </tal:block>
      <tal:block condition="python:parser_type == 'html'">
        <tal:block replace="structure python:here.Epoz(
            name='source', data=source, lang='en',
            style='width: 100%; height: 300px; border: 1px solid #a0a0a0; border-style: solid;')" />
      </tal:block>
      <p>
        <button type="submit" i18n:translate="button_change">Save Changes</button>
      </p>
    </form>
  </metal:block>
</html>